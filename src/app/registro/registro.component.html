<div class="flex min-h-screen items-center justify-center p-6">
  <div
    class="bg-white shadow-2xl flex flex-col md:flex-row w-full overflow-hidden transform transition duration-500 h-auto md:h-[90vh] rounded-lg"
  >
    <!-- Image Section -->
    <div class="w-full md:w-1/2 min-h-full flex">
      <img
        src="assets/img/login.png"
        alt="Register Image"
        class="h-full w-full object-left"
      />
    </div>

    <!-- Form Section -->
    <div
      class="w-full md:w-1/2 h-auto p-8 flex flex-col justify-center relative"
    >
      <!-- Back Button -->
      <a
        href="#"
        class="absolute top-4 left-6 text-gray-600 hover:text-gray-800 transition duration-300"
        [class.pointer-events-none]="isSubmitting"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 19l-7-7m0 0l7-7m-7 7h18"
          />
        </svg>
      </a>

      <h2
        class="text-4xl md:text-4xl font-bold text-gray-800 mb-8 text-center font-serif mb-12 md:mb-20"
      >
        Crie sua conta no <span class="text-[#5e6d72]">BolsoSeguro</span>
      </h2>

      <form
        [formGroup]="cadastroForm"
        (ngSubmit)="submit()"
        class="space-y-3 w-full max-w-md mx-auto"
      >
        <!-- Nome Completo -->
        <div class="relative">
          <label class="block text-base text-gray-600 mb-2 font-medium"
            >Nome Completo</label
          >
          <input
            type="text"
            formControlName="nome"
            class="w-full pl-4 pr-5 py-4 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5e6d72] focus:border-transparent transition duration-300"
            placeholder="Digite seu nome completo"
            [disabled]="isSubmitting"
            [ngClass]="{
              'border-red-500':
                cadastroForm.controls['nome'].invalid &&
                cadastroForm.controls['nome'].touched,
              'border-green-500':
                cadastroForm.controls['nome'].valid &&
                cadastroForm.controls['nome'].touched
            }"
          />
          <div
            *ngIf="
              cadastroForm.controls['nome'].invalid &&
              cadastroForm.controls['nome'].touched
            "
            class="text-red-500 text-sm"
          >
            <p *ngIf="cadastroForm.controls['nome'].hasError('required')">
              Nome é obrigatório.
            </p>
            <p *ngIf="cadastroForm.controls['nome'].hasError('minlength')">
              Nome deve ter pelo menos 3 caracteres.
            </p>
          </div>
        </div>

        <!-- Email Input -->
        <div class="relative">
          <label class="block text-base text-gray-600 mb-2 font-medium"
            >E-mail</label
          >
          <input
            type="email"
            formControlName="email"
            class="w-full pl-4 pr-5 py-4 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5e6d72] focus:border-transparent transition duration-300"
            placeholder="Digite seu e-mail"
            [disabled]="isSubmitting"
            [ngClass]="{
              'border-red-500':
                cadastroForm.get('email')?.invalid &&
                cadastroForm.get('email')?.touched,
              'border-green-500':
                cadastroForm.get('email')?.valid &&
                cadastroForm.get('email')?.touched
            }"
          />
          <div
            *ngIf="
              cadastroForm.get('email')?.invalid &&
              cadastroForm.get('email')?.touched
            "
            class="text-red-500 text-sm"
          >
            <p *ngIf="cadastroForm.get('email')?.hasError('required')">
              Email é obrigatório.
            </p>
            <p *ngIf="cadastroForm.get('email')?.hasError('email')">
              Por favor, insira um email válido.
            </p>
          </div>
        </div>

        <!-- Password Input -->
        <!-- Senha -->
        <div class="relative">
          <label class="block text-base text-gray-600 mb-2 font-medium"
            >Senha</label
          >
          <div class="relative">
            <input
              [type]="showPassword ? 'text' : 'password'"
              formControlName="senha"
              class="w-full pl-4 pr-12 py-4 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5e6d72] focus:border-transparent transition duration-300"
              placeholder="Crie uma senha"
              [disabled]="isSubmitting"
              [ngClass]="{
                'border-red-500':
                  cadastroForm.get('senha')?.invalid &&
                  cadastroForm.get('senha')?.touched,
                'border-green-500':
                  cadastroForm.get('senha')?.valid &&
                  cadastroForm.get('senha')?.touched
              }"
            />
            <button
              type="button"
              (click)="togglePasswordVisibility()"
              class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-[#5e6d72] transition"
              aria-label="Mostrar senha"
              [disabled]="isSubmitting"
            >
              <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
            </button>
          </div>
          <div
            *ngIf="
              cadastroForm.get('senha')?.invalid &&
              cadastroForm.get('senha')?.touched
            "
            class="text-red-500 text-sm"
          >
            <p *ngIf="cadastroForm.get('senha')?.hasError('required')">
              A senha é obrigatória.
            </p>
            <p *ngIf="cadastroForm.get('senha')?.hasError('minlength')">
              A senha deve ter pelo menos 6 caracteres.
            </p>
          </div>
        </div>

        <!-- Confirmar Senha -->
        <div class="relative">
          <label class="block text-base text-gray-600 mb-2 font-medium"
            >Confirme sua Senha</label
          >
          <div class="relative">
            <input
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmarSenha"
              class="w-full pl-4 pr-12 py-4 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#5e6d72] focus:border-transparent transition duration-300"
              placeholder="Repita sua senha"
              [disabled]="isSubmitting"
              [ngClass]="{
                'border-red-500':
                  (cadastroForm.get('confirmarSenha')?.invalid ||
                    cadastroForm.hasError('senhasDiferentes')) &&
                  cadastroForm.get('confirmarSenha')?.touched,
                'border-green-500':
                  cadastroForm.get('confirmarSenha')?.valid &&
                  !cadastroForm.hasError('senhasDiferentes') &&
                  cadastroForm.get('confirmarSenha')?.touched
              }"
            />
            <button
              type="button"
              (click)="toggleConfirmPasswordVisibility()"
              class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-[#5e6d72] transition"
              aria-label="Mostrar senha"
              [disabled]="isSubmitting"
            >
              <i
                [class]="
                  showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'
                "
              ></i>
            </button>
          </div>
          <div
            *ngIf="
              cadastroForm.get('confirmarSenha')?.invalid &&
              cadastroForm.get('confirmarSenha')?.touched
            "
            class="text-red-500 text-sm"
          >
            <p *ngIf="cadastroForm.get('confirmarSenha')?.hasError('required')">
              Confirme sua senha.
            </p>
            <p *ngIf="cadastroForm.hasError('senhasDiferentes')">
              As senhas não coincidem.
            </p>
          </div>
        </div>

        <!-- Feedback Messages -->
        <div *ngIf="errorMessage" class="animate-fadeIn">
          <div
            class="bg-red-50 border border-red-200 rounded-xl p-4 text-center"
          >
            <p class="text-red-600 text-sm">{{ errorMessage }}</p>
          </div>
        </div>

        <div *ngIf="successMessage" class="animate-fadeIn">
          <div
            class="bg-green-50 border border-green-200 rounded-xl p-4 text-center"
          >
            <p class="text-green-600 text-sm">{{ successMessage }}</p>
          </div>
        </div>

        <!-- Register Button -->
        <button
          type="submit"
          [disabled]="cadastroForm.invalid || isSubmitting"
          class="w-full bg-gradient-to-r from-[#5e6d72] to-[#b6c6cc] text-white py-4 rounded-xl font-semibold text-base shadow-lg hover:opacity-90 transition transform hover:scale-105 cursor-pointer disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2"
        >
          <span *ngIf="!isSubmitting">Criar Conta</span>
          <span *ngIf="isSubmitting" class="flex items-center gap-2">
            <svg
              class="animate-spin h-5 w-5 text-white"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"
              ></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
            Criando conta...
          </span>
        </button>
      </form>

      <!-- Login Link -->
      <p class="text-lg text-gray-600 text-center mt-8">
        Já tem uma conta?
        <a
          href="/login"
          class="text-[#5e6d72] font-bold hover:underline transition"
          [class.pointer-events-none]="isSubmitting"
          >Faça login</a
        >
      </p>
    </div>
  </div>
</div>
