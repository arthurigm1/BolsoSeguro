<!-- Container Principal -->
<div
  class="min-h-screen bg-gradient-to-br from-[#F8F7F5] to-[#E0E5E7] p-4 sm:p-6"
>
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div
      class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"
    >
      <div>
        <h1 class="text-xl sm:text-2xl font-bold text-[#013E4C]">Categorias</h1>
        <p class="text-sm text-[#5e6d72] mt-1">
          Gerencie suas categorias de despesas e receitas
        </p>
      </div>
      <button
        (click)="openModal()"
        [disabled]="isAddingCategory"
        class="w-full sm:w-auto flex items-center justify-center font-semibold bg-gradient-to-r from-[#1C6956] to-[#013E4C] text-white px-4 py-3 rounded-xl shadow-md hover:shadow-lg transition-all duration-300"
      >
        @if (isAddingCategory) {
        <i class="fas fa-spinner fa-spin mr-2"></i>
        Processando... } @else {
        <i class="fas fa-plus mr-2"></i>
        {{
          activeTab === "expenses"
            ? "Nova Categoria de Despesa"
            : "Nova Categoria de Receita"
        }}
        }
      </button>
    </div>

    @if (isLoadingPage) {
    <!-- Loading State -->
    <div class="flex items-center justify-center min-h-[60vh] w-full">
      <div class="text-center">
        <i class="fas fa-spinner fa-spin text-4xl text-[#1C6956] mb-4"></i>
        <p class="text-base font-medium text-[#5e6d72]">
          Carregando categorias...
        </p>
      </div>
    </div>
    } @else {
    <!-- Navigation Tabs -->
    <div class="bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg mb-6">
      <ul class="flex flex-col sm:flex-row">
        <li
          class="flex-1 text-center border-b-2"
          [class.border-[#1C6956]]="activeTab === 'expenses'"
        >
          <button
            (click)="setActiveTab('expenses')"
            class="w-full py-3 text-sm sm:text-base text-[#5e6d72] hover:text-[#1C6956] transition font-medium cursor-pointer"
          >
            <i class="fas fa-wallet mr-2"></i>Despesas
          </button>
        </li>
        <li
          class="flex-1 text-center border-b-2"
          [class.border-[#1C6956]]="activeTab === 'earnings'"
        >
          <button
            (click)="setActiveTab('earnings')"
            class="w-full py-3 text-sm sm:text-base text-[#5e6d72] hover:text-[#1C6956] transition font-medium cursor-pointer"
          >
            <i class="fas fa-dollar-sign mr-2"></i>Receitas
          </button>
        </li>
      </ul>
    </div>

    <!-- Content Box -->
    <div class="bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg p-4 sm:p-6">
      @if (activeTab === 'expenses') {
      <!-- Despesas -->
      @if (loadingExpenses) {
      <div class="space-y-4 py-6">
        <!-- Skeleton loading -->
        @for (i of [1, 2, 3]; track i) {
        <div class="animate-pulse flex justify-between items-center py-3 px-4">
          <div class="flex items-center">
            <div class="w-6 h-6 bg-[#E0E5E7] rounded-full mr-3"></div>
            <div class="h-4 bg-[#E0E5E7] rounded w-32"></div>
          </div>
          <div class="w-4 h-4 bg-[#E0E5E7] rounded-full"></div>
        </div>
        }
      </div>
      } @else {
      <h2
        class="text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-[#013E4C] flex items-center"
      >
        <i class="fas fa-list-ul mr-3"></i>Categorias de Despesas
      </h2>

      @if (categoriasDespesas.length === 0) {
      <div class="text-center py-10 text-[#5e6d72]">
        <i class="fas fa-folder-open text-4xl mb-3"></i>
        <p class="text-sm">Nenhuma categoria de despesa cadastrada</p>
      </div>
      } @else {
      <ul class="divide-y divide-[#E0E5E7]">
        @for (category of categoriasDespesas; track category.id) {
        <li
          class="py-3 sm:py-4 px-2 sm:px-4 hover:bg-[#F8F7F5] rounded-lg transition flex justify-between items-center"
        >
          <div class="flex items-center">
            <i class="fas fa-minus-circle mr-3 text-lg text-[#1C6956]"></i>
            <span class="text-[#013E4C] text-sm sm:text-base font-medium">
              {{ category.nome }}
            </span>
          </div>
          <button
            (click)="deletarCategoria(category.id)"
            [disabled]="deletingCategoryId === category.id"
            class="p-2 rounded-full bg-[#E0E5E7]/20 hover:bg-[#E0E5E7]/30 transition cursor-pointer"
            title="Remover"
          >
            @if (deletingCategoryId === category.id) {
            <i class="fas fa-spinner fa-spin text-[#5e6d72]"></i>
            } @else {
            <i class="fas fa-trash text-[#5e6d72]"></i>
            }
          </button>
        </li>
        }
      </ul>
      } } } @if (activeTab === 'earnings') {
      <!-- Receitas -->
      @if (loadingEarnings) {
      <div class="space-y-4 py-6">
        <!-- Skeleton loading -->
        @for (i of [1, 2, 3]; track i) {
        <div class="animate-pulse flex justify-between items-center py-3 px-4">
          <div class="flex items-center">
            <div class="w-6 h-6 bg-[#E0E5E7] rounded-full mr-3"></div>
            <div class="h-4 bg-[#E0E5E7] rounded w-32"></div>
          </div>
          <div class="w-4 h-4 bg-[#E0E5E7] rounded-full"></div>
        </div>
        }
      </div>
      } @else {
      <h2
        class="text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-[#013E4C] flex items-center"
      >
        <i class="fas fa-list-ul mr-3"></i>Categorias de Receitas
      </h2>

      @if (categoriasReceitas.length === 0) {
      <div class="text-center py-10 text-[#5e6d72]">
        <i class="fas fa-folder-open text-4xl mb-3"></i>
        <p class="text-sm">Nenhuma categoria de receita cadastrada</p>
      </div>
      } @else {
      <ul class="divide-y divide-[#E0E5E7]">
        @for (category of categoriasReceitas; track category.id) {
        <li
          class="py-3 sm:py-4 px-2 sm:px-4 hover:bg-[#F8F7F5] rounded-lg transition flex justify-between items-center"
        >
          <div class="flex items-center">
            <i class="fas fa-plus-circle mr-3 text-lg text-[#1C6956]"></i>
            <span class="text-[#013E4C] text-sm sm:text-base font-medium">
              {{ category.nome }}
            </span>
          </div>
          <button
            (click)="deletarCategoria(category.id)"
            class="p-2 rounded-full bg-[#E0E5E7]/20 hover:bg-[#E0E5E7]/30 transition cursor-pointer"
            title="Remover"
          >
            <i class="fas fa-trash text-[#5e6d72]"></i>
          </button>
        </li>
        }
      </ul>
      } } }
    </div>
    }
  </div>
</div>
