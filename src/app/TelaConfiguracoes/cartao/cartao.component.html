<!-- Container Principal -->
<div
  class="min-h-screen bg-gradient-to-br from-[#F8F7F5] to-[#E0E5E7] p-4 sm:p-6"
>
  <div class="max-w-4xl mx-auto">
    <!-- Header -->
    <div
      class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4"
    >
      <div>
        <h1 class="text-xl sm:text-2xl font-bold text-[#013E4C]">Cartões</h1>
        <p class="text-sm text-[#5e6d72] mt-1">
          Gerencie seus cartões de crédito e débito
        </p>
      </div>
      <button
        (click)="openModal()"
        [disabled]="isAddingCard"
        class="w-full sm:w-auto flex items-center justify-center font-semibold bg-gradient-to-r from-[#1C6956] to-[#013E4C] text-white px-4 py-3 rounded-xl shadow-md hover:shadow-lg transition-all duration-300"
      >
        @if (isAddingCard) {
        <i class="fas fa-spinner fa-spin mr-2"></i>
        Processando... } @else {
        <i class="fas fa-plus mr-2"></i>
        Novo Cartão }
      </button>
    </div>

    @if (isLoadingPage) {
    <!-- Loading State -->
    <div class="flex items-center justify-center min-h-[60vh] w-full">
      <div class="text-center">
        <i class="fas fa-spinner fa-spin text-4xl text-[#1C6956] mb-4"></i>
        <p class="text-base font-medium text-[#5e6d72]">
          Carregando cartões...
        </p>
      </div>
    </div>
    } @else {
    <!-- Content Box -->
    <div class="bg-white/80 backdrop-blur-lg rounded-2xl shadow-lg p-4 sm:p-6">
      <h2
        class="text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-[#013E4C] flex items-center"
      >
        <i class="fas fa-credit-card mr-3"></i>Meus Cartões
      </h2>

      @if (cartoes.length === 0) {
      <div class="text-center py-10 text-[#5e6d72]">
        <i class="fas fa-credit-card text-4xl mb-3"></i>
        <p class="text-sm">Nenhum cartão cadastrado</p>
      </div>
      } @else {
      <ul class="divide-y divide-[#E0E5E7]">
        @for (cartao of cartoes; track cartao.id) {
        <li
          class="py-3 sm:py-4 px-2 sm:px-4 hover:bg-[#F8F7F5] rounded-lg transition flex justify-between items-center"
        >
          <div class="flex items-center">
            <i class="fas fa-credit-card mr-3 text-lg text-[#1C6956]"></i>
            <div>
              <span
                class="text-[#013E4C] text-sm sm:text-base font-medium block"
              >
                {{ cartao.nome }}
              </span>
              <span class="text-[#5e6d72] text-xs">
                {{ cartao.tipo === "credito" ? "Crédito" : "Débito" }}
              </span>
            </div>
          </div>
          <button
            (click)="deletarCartao(cartao.id)"
            [disabled]="deletingCardId === cartao.id"
            class="p-2 rounded-full bg-[#E0E5E7]/20 hover:bg-[#E0E5E7]/30 transition cursor-pointer"
            title="Remover"
          >
            @if (deletingCardId === cartao.id) {
            <i class="fas fa-spinner fa-spin text-[#5e6d72]"></i>
            } @else {
            <i class="fas fa-trash text-[#5e6d72]"></i>
            }
          </button>
        </li>
        }
      </ul>
      }
    </div>
    }
  </div>
</div>
